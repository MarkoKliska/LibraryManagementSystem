<div class="change-password-card">
  <h2 class="title">Change Password</h2>

  <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="oldPassword">Current Password</label>
      <input 
        id="oldPassword" 
        type="password" 
        formControlName="oldPassword"
        [class.invalid]="f['oldPassword'].invalid && (f['oldPassword'].dirty || f['oldPassword'].touched)" 
      />
      <div class="error" *ngIf="f['oldPassword'].invalid && (f['oldPassword'].dirty || f['oldPassword'].touched)">
        Current password is required.
      </div>
    </div>

    <div class="form-group">
      <label for="newPassword">New Password</label>
      <input 
        id="newPassword" 
        type="password" 
        formControlName="newPassword"
        [class.invalid]="f['newPassword'].invalid && (f['newPassword'].dirty || f['newPassword'].touched)" 
      />
      <div class="error" *ngIf="f['newPassword'].errors?.['required'] && (f['newPassword'].dirty || f['newPassword'].touched)">
        New password is required.
      </div>
      <div class="error" *ngIf="f['newPassword'].errors?.['minlength']">
        Password must be at least 6 characters long.
      </div>
    </div>

    <div class="form-group">
      <label for="confirmPassword">Confirm New Password</label>
      <input 
        id="confirmPassword" 
        type="password" 
        formControlName="confirmPassword"
        [class.invalid]="(f['confirmPassword'].dirty || f['confirmPassword'].touched) && changePasswordForm.errors?.['mismatch']" 
      />
      <div class="error" *ngIf="(f['confirmPassword'].dirty || f['confirmPassword'].touched) && changePasswordForm.errors?.['mismatch']">
        Passwords do not match.
      </div>
    </div>

    <button type="submit" class="btn-submit" [disabled]="isSubmitting || changePasswordForm.invalid">
      {{ isSubmitting ? 'Changing...' : 'Change Password' }}
    </button>
  </form>
</div>
